# =============================================================================
# Chroma Configuration (Final Optimized)
# =============================================================================

database:
  name: "chroma"
  display_name: "Chroma"
  version: "0.4.0"
  type: "database"
  language: "Python"
  license: "Apache-2.0"

# -----------------------------------------------------------------------------
# Connection Settings
# -----------------------------------------------------------------------------
connection:
  # Use HTTP to talk to Docker
  mode: "http"

  # Persistent path (ignored in http mode, but kept for reference)
  persistent:
    path: "./data/chroma"

  # Connection details
  http:
    host: "localhost"
    port: 8100
    ssl: false
    headers: {}

  # Docker info
  docker:
    enabled: true
    image: "chromadb/chroma:latest"
    port: 8100

# -----------------------------------------------------------------------------
# Collection Settings
# -----------------------------------------------------------------------------
collection:
  name_prefix: "benchmark"
  metadata:
    description: "Benchmark collection"

# -----------------------------------------------------------------------------
# Index Configurations
# -----------------------------------------------------------------------------
index_configurations:
  # 1. L2 Distance (Used for SIFT1M, GIST1M, Deep1M)
  - name: "HNSW_L2"
    type: "hnsw"
    params:
      space: "l2"
      # --- TUNING FOR GIST1M ---
      # Increase M (Neighbors per node): 16 -> 32
      M: 32
      # Increase construction_ef (Search depth during build): 64 -> 128
      construction_ef: 128
      # Increase search_ef (Search depth during query): 100 -> 200
      search_ef: 200
      # -------------------------
      num_threads: 10

  # 2. Cosine Distance (Used for MS MARCO, Glove)
  - name: "HNSW_Cosine"
    type: "hnsw"
    params:
      space: "cosine"
      M: 32
      construction_ef: 128
      search_ef: 200
      num_threads: 10

# -----------------------------------------------------------------------------
# Distance Metrics Support
# -----------------------------------------------------------------------------
distance_metrics:
  l2:
    supported: true
  cosine:
    supported: true
  ip:
    supported: true

# -----------------------------------------------------------------------------
# Metadata Configuration
# -----------------------------------------------------------------------------
metadata:
  # Empty to prevent schema errors
  fields: []

# -----------------------------------------------------------------------------
# Batch Settings
# -----------------------------------------------------------------------------
batch:
  insert_batch_size: 2000
  search_batch_size: 100

# -----------------------------------------------------------------------------
# Persistence Settings
# -----------------------------------------------------------------------------
persistence:
  auto_persist: true
  anonymized_telemetry: false